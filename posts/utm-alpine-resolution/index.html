<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title># Dynamic Resolution Setup for Alpine Linux on UTM (macOS M1/M2/M3) | jeakob</title><link rel=stylesheet href=/blog/css/main.min.450f1759fdcef77e04b0109829b090ce812958219866949816719fff87c50f56.css integrity="sha256-RQ8XWf3O934EsBCYKbCQzoEpWCGYZpSYFnGf/4fFD1Y=" crossorigin=anonymous></head><body><header><h1>jeakob
<a href=https://github.com/jeakob rel=me class=social aria-label=GitHub><svg width="1em" height="1em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg></a></h1><nav><ul class=top-menu><li><a href=/blog/>home</a></li><li><a aria-current=true class=ancestor href=/blog/posts/>posts</a></li><li><a href=/blog/tags/>tags</a></li></ul></nav></header><main><h1># Dynamic Resolution Setup for Alpine Linux on UTM (macOS M1/M2/M3)</h1><time datetime=2025-12-18T22:00:00+00:00>December 18, 2025</time><p>This guide explains how to enable automatic resolution changes for Alpine Linux with LXQt running in UTM on Apple Silicon Macs.</p><h2 id=the-problem>The Problem</h2><p>When running Alpine Linux in UTM on Apple Silicon, resizing the UTM window doesn&rsquo;t automatically adjust the guest display resolution. This is because the SPICE guest tools need to be properly configured.</p><h2 id=the-solution>The Solution</h2><p>Alpine Linux requires two separate packages for SPICE functionality:</p><ol><li><code>spice-vdagent</code> - The client application</li><li><code>spice-vdagent-openrc</code> - The OpenRC service scripts for the daemon</li></ol><h3 id=step-1-install-required-packages>Step 1: Install Required Packages</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install both the agent and OpenRC service files</span>
</span></span><span style=display:flex><span>apk add spice-vdagent spice-vdagent-openrc
</span></span></code></pre></div><h3 id=step-2-start-and-enable-the-daemon>Step 2: Start and Enable the Daemon</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Start the spice-vdagentd daemon (note the &#39;d&#39; at the end)</span>
</span></span><span style=display:flex><span>rc-service spice-vdagentd start
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Verify it&#39;s running</span>
</span></span><span style=display:flex><span>rc-service spice-vdagentd status
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable it to start automatically at boot</span>
</span></span><span style=display:flex><span>rc-update add spice-vdagentd default
</span></span></code></pre></div><h3 id=step-3-verify-the-socket-exists>Step 3: Verify the Socket Exists</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check that the daemon socket was created</span>
</span></span><span style=display:flex><span>ls -la /run/spice-vdagentd/
</span></span></code></pre></div><p>You should see <code>spice-vdagent-sock</code> in the output.</p><h3 id=step-4-restart-your-desktop-session>Step 4: Restart Your Desktop Session</h3><p>Log out of LXQt and log back in, or reboot the VM:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>reboot
</span></span></code></pre></div><h2 id=how-to-test>How to Test</h2><p>After completing the setup:</p><ol><li>Resize the UTM window</li><li>The Alpine Linux desktop resolution should automatically adjust to match</li></ol><h2 id=troubleshooting>Troubleshooting</h2><h3 id=check-if-the-daemon-is-running>Check if the daemon is running:</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ps aux | grep spice-vdagentd
</span></span></code></pre></div><h3 id=check-for-errors-in-logs>Check for errors in logs:</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dmesg | grep spice
</span></span><span style=display:flex><span><span style=color:#75715e># or</span>
</span></span><span style=display:flex><span>grep spice /var/log/messages
</span></span></code></pre></div><h3 id=common-error-messages>Common Error Messages</h3><p>If you see errors like:</p><pre tabindex=0><code>Failed to connect with spice-vdagentd due &#39;Could not connect: No such file or directory&#39;
</code></pre><p>This means the <code>spice-vdagentd</code> daemon is not running. Make sure you&rsquo;ve installed <code>spice-vdagent-openrc</code> and started the service.</p><h2 id=why-this-works>Why This Works</h2><ul><li><strong>spice-vdagent</strong>: The client that runs in your X session and communicates display changes</li><li><strong>spice-vdagentd</strong>: The daemon that bridges between the SPICE protocol and the client</li><li><strong>spice-vdagent-openrc</strong>: Contains the OpenRC init scripts needed to run the daemon as a service</li></ul><p>The client cannot function without the daemon running, which is why both packages are required.</p><h2 id=system-information>System Information</h2><ul><li><strong>OS</strong>: Alpine Linux</li><li><strong>Desktop Environment</strong>: LXQt (also works with other X11-based DEs)</li><li><strong>Virtualization</strong>: UTM on macOS (Apple Silicon M1/M2/M3)</li><li><strong>Backend</strong>: QEMU or Apple Virtualization Framework</li></ul><hr><p><strong>Last Updated</strong>: December 19, 2025</p><div><h2>tags:</h2><ul class=taxonomy-list><li class=taxonomy><a href=/blog/tags/alpine/>alpine</a></li><li class=taxonomy><a href=/blog/tags/utm/>utm</a></li></ul></div></main><footer><p class=terminal>jeakob@blog $ <span class=blink>_</span></p></footer></body></html>